<!-- ðŸ—£ **ì½œë°± ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•  API**
  
  1. ëžœë¤í•œ ìˆ«ìžë¥¼ ê°€ì§€ê³  ì˜¤ëŠ” API : `http://numbersapi.com/random?min=1&max=200` 
  2. post API:  `https://koreanjson.com/posts/${num}` 
  3. ìœ ì €ê°€ ì“´ ë‹¤ë¥¸ ê¸€ API : `https://koreanjson.com/posts?userId=${userId}`  -->

<!DOCTYPE html>
<html lang="ko">
    <head>
        <title>ì½œë°±ê³¼ ì¹œêµ¬ë“¤</title>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script>
            const myCallback = () => {
                const aa = new XMLHttpRequest();
                aa.open("get", `http://numbersapi.com/random?min=1&max=200`);
                aa.send();
                aa.addEventListener("load", function (res) {
                    console.log(res);
                    const num = res.target.response.split(" ")[0]; // 69 (ëžœë¤ ìˆ«ìž)

                    const bb = new XMLHttpRequest();
                    bb.open("get", `https://koreanjson.com/posts/${num}`);
                    bb.send();
                    bb.addEventListener("load", (res) => {
                        console.log(res);
                        const userId = JSON.parse(res.target.response).UserId;

                        const cc = new XMLHttpRequest();
                        cc.open(
                            "get",
                            `https://koreanjson.com/posts?userId=${userId}`
                        );
                        cc.send();
                        cc.addEventListener("load", (res) => {
                            console.log(res);
                        });
                    });
                });
            };

            // new Promise((resolve, reject) => {
            //     try {
            //         // ì—¬ê¸°ì„œ API ìš”ì²­ì„ í•œë‹¤ë©´??
            //         const result = "ì² ìˆ˜";
            //         resolve(result); // ì„±ê³µ
            //     } catch (error) {
            //         reject("ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤!!!"); // ì‹¤íŒ¨
            //     }
            // })
            //     .then((res) => {
            //         console.log(res); // ì² ìˆ˜
            //     })
            //     .catch((err) => {
            //         console.log(err); // ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤!!
            //     });
            const myPromise = () => {
                axios
                    .get(`http://numbersapi.com/random?min=1&max=200`)
                    .then((res) => {
                        return axios.get(
                            `http://numbersapi.com/random?min=1&max=200`
                        );
                    })
                    .then((res) => {
                        return axios.get(
                            `http://numbersapi.com/random?min=1&max=200`
                        );
                    })
                    .then((res) => {
                        // res ìµœì¢… ê²°ê³¼
                    });
            };

            // axios, fetch ë“± => ëŒ€í‘œì ì¸ Promise (.then ë“±ì˜ ê¸°ëŠ¥) ë¥¼ ì§€ì›í•˜ëŠ” ê¸°ëŠ¥
            // axios, fetch ë“±ì„ ê¸°ë‹¤ë¦¬ëŠ” 2ê°€ì§€ ë°©ë²•
            // 1. .then() í™œìš©
            // 2. await í™œìš©    => ì£¼ì˜) awaitëŠ” ì•„ë¬´ë°ë‚˜ ë¶™ì¸ë‹¤ê³  ë’¤ì—ê»„ ê¸°ë‹¤ë¦¬ëŠ”ê²Œ ì•„ë‹˜!!
            const myAsyncAwait = async () => {
                await axios.get(`http://numbersapi.com/random?min=1&max=200`);
                await axios.get(`http://numbersapi.com/random?min=1&max=200`);
                await axios.get(`http://numbersapi.com/random?min=1&max=200`);
            };
        </script>
    </head>
    <body>
        <button onclick="myCallback()">Callback ì—°ìŠµí•˜ê¸°!!</button>
        <button onclick="myPromise()">Promise ì—°ìŠµí•˜ê¸°!!</button>
        <button onclick="myAsyncAwait()">AsyncAwait ì—°ìŠµí•˜ê¸°!!</button>
    </body>
</html>
